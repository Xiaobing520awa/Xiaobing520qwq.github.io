## 为什么 Vuex 的 mutation 中不能做异步操作？
> 八股文一网打尽，更多面试题请看[程序员面试刷题神器 - 面试鸭](https://www.mianshiya.com/)

## 回答重点
Vuex 的 mutation 中不能做异步操作，主要是因为 mutation 的设计理念和作用是用于同步地更新 Vuex 的状态（state）。如果在 mutation 中进行异步操作，会导致状态的不可预测性和难以追踪的调试。

为了更清晰地解释这个问题，我们可以看一看 Vuex 的核心思想：
1）**状态管理**：Vuex 是一个状态管理库，它管理应用的所有状态，并确保状态的变更是可追踪、可预测的。
2）**同步变更**：mutation 是 Vuex 中唯一允许变更状态的地方，并且所有的变更必须是同步的，这样我们可以确保状态在变更时的一致性和可见性。
3）**调试工具**：Vuex 提供了强大的调试工具（如 Vue DevTools），它们依赖 mutation 的同步性来记录和追踪状态的变更。如果引入异步操作，工具将难以准确地捕捉和回放状态变更。

综合以上观点，我们可以看出，mutation 强调的是同步、可预测、可调试的特点，任何异步操作都会破坏这种特性。

## 扩展知识
在解决这个问题的同时，我们可以进一步了解 Vuex 的其他相关概念和特性：

1）**Action 的使用**：
   - 在 Vuex 中，异步操作是通过 Action 来实现的。Action 是用来提交 mutation 而不是直接变更状态的，并且可以包含任意的异步操作。
   - 通过这种设计，我们可以在 action 中执行异步操作，然后在 promise 或 asynchronous 回调中提交 mutation，确保 mutation 是同步的。

2）**严格模式**：
   - Vuex 提供了严格模式，确保只有在 mutation 中才能进行状态变更。如果试图在其他地方改变状态，严格模式会抛出错误，从而帮助开发者捕捉不符合规范的状态变更。

3）**状态快照**：
   - 由于 Vuex 的状态变更是同步的，它允许开发者轻松地进行状态快照和时间旅行调试。例如，在调试工具中查看每一步状态的变化过程，以及回溯到前一个状态以进行调试。

4）**插件和中间件**：
   - Vuex 还支持插件和中间件功能，例如日志追踪、状态持久化等。这些插件能依靠 mutation 的同步性做精确的状态监控和处理。



> 八股文一网打尽，更多面试题请看[程序员面试刷题神器 - 面试鸭](https://www.mianshiya.com/)